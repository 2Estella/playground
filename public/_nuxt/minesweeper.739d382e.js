import{f as K,r as i,y as P,z as Q,o as c,c as v,a as s,j as X,v as Y,g as r,k as Z,t as b,b as ee,w as le,m as te,T as ae,i as w,h as A,d as N,n as V,F as j,q as z}from"./entry.f4fe19fb.js";const oe=s("h2",null,"minesweeper",-1),ne={class:"topArea"},se=s("option",{value:"0"},"초급",-1),ue=s("option",{value:"1"},"중급",-1),ie=s("option",{value:"2"},"고급",-1),re=[se,ue,ie],ce={class:"infoBox"},ve={class:"gameBoard"},de=["onMouseenter","onClick","onMouseup"],fe={key:0},he={key:0,class:"endBtn"},ge=["onClick"],_e={key:1,class:"resultBox"},me={key:0,class:"win"},pe=s("br",null,null,-1),ke={class:"endBtn"},Ce=["onClick"],Me={key:1},ye={class:"endBtn"},we=["onClick"],be=K({__name:"minesweeper",setup(Ae){let u=i(0);const h=[{row:9,column:9,total:81,mine:10},{row:16,column:16,total:256,mine:40},{row:16,column:30,total:480,mine:99}];let d=[];const o=i([]);let B=i(0),m=i(0),_=i(0),S=i(0),p=i(0);const x=()=>{B.value=h[u.value].total,m.value=h[u.value].row,_.value=h[u.value].column,d=new Array(m.value).fill(0).map(()=>new Array(_.value).fill(0));let l=[];for(let a=0;a<m.value;a++)for(let t=0;t<_.value;t++)l.push([a,t]);o.value=new Array(B.value).fill(0).map((a,t)=>({isChecked:!1,isHovering:!1,flagged:!1,idx:t,row:l[t][0],col:l[t][1]})),o.value=U(o.value,_.value),S.value=h[u.value].mine,p.value=h[u.value].mine};let g=i(!1);const R=(l,a)=>{if(!g.value){q(l,a);for(let t=0;t<m.value;t++)for(let e=0;e<_.value;e++)o.value[t][e].countMine=d[t][e];g.value=!0,W()}o.value[l][a].countMine===-1&&(f.value=!0),!o.value[l][a].isChecked&&!o.value[l][a].flagged&&(o.value[l][a].isChecked=!0,G(l,a)),setTimeout(()=>$(),100)},q=(l,a)=>{let t=0;for(;t<h[u.value].mine;){let e=Math.floor(Math.random()*m.value),n=Math.floor(Math.random()*_.value);l!==e&&a!==n&&d[e][n]!==-1&&(d[e][n]=-1,E(e,n),t++)}},E=(l,a)=>{for(let t=l-1;t<l+2;t++)for(let e=a-1;e<a+2;e++)o.value[t]&&d[t][e]!==-1&&(d[t][e]+=1)},G=(l,a)=>{let t=[];if(d[l][a]===0)for(let e=l-1;e<l+2;e++)for(let n=a-1;n<a+2;n++)o.value[e]&&o.value[e][n]&&!o.value[e][n].isChecked&&!o.value[e][n].flagged&&(o.value[e][n].isChecked=!0,t.push([e,n]));t.length&&t.forEach(e=>{let n=e[0],J=e[1];G(n,J)})},I=(l,a)=>{o.value[l][a].flagged?(o.value[l][a].flagged=!1,p.value++):p.value&&!o.value[l][a].isChecked&&(o.value[l][a].flagged=!0,p.value--),setTimeout(()=>$(),100)},D=l=>{l.buttons===3&&F()},F=()=>{let l=0,a=[];for(let t=k-1;t<k+2;t++)if(o.value[t])for(let e=C-1;e<C+2;e++)o.value[t][e]&&(o.value[t][e].flagged&&l++,!o.value[t][e].isChecked&&!o.value[t][e].flagged&&(a.push([t,e]),o.value[t][e].isHovering=!0));l===o.value[k][C].countMine&&a.forEach(t=>{let e=t[0],n=t[1];l===o.value[k][C].countMine&&(d[e][n]===-1&&!o.value[e][n].flagged&&(f.value=!0),!o.value[e][n].isChecked&&!o.value[e][n].flagged&&(o.value[e][n].isChecked=!0,G(e,n)))})};let k=0,C=0;const H=(l,a)=>{k=l,C=a},L=(l,a)=>o.value[l][a].countMine<0&&f.value?"mine":o.value[l][a].isChecked?"checked":o.value[l][a].flagged?"flagged":"";let f=i(!1),M=i(!1);const T=()=>{y.value=0,d=[],o.value=[],g.value=!1,f.value=!1,M.value=!1,S.value=0,p.value=0,x()},O=()=>{confirm("게임을 종료하시겠습니까?")&&(f.value=!0,T())},$=()=>{let l=document.querySelectorAll(".flagged").length;document.querySelectorAll(".checked").length+l===B.value&&(M.value=!0)},y=i(0),W=()=>{const l=setInterval(()=>{(y.value===999||f.value||M.value||!g.value)&&clearInterval(l),y.value+=1},1e3)},U=(l,a)=>{const t=Math.floor(l.length/a)+(Math.floor(l.length%a)>0?1:0),e=[];for(let n=0;n<=t-1;n++)e.push(l.splice(0,a));return e};return P(u,()=>{g.value=!1,T(),x()}),Q(()=>{x()}),(l,a)=>(c(),v("div",{id:"minesweeperContainer",onContextmenu:a[1]||(a[1]=w(()=>{},["prevent"]))},[oe,s("div",{class:V(["content",`lv${r(u)}`])},[s("div",ne,[X(s("select",{name:"level","onUpdate:modelValue":a[0]||(a[0]=t=>Z(u)?u.value=t:u=t)},re,512),[[Y,r(u)]]),s("div",ce,[s("div",null,"💣: "+b(r(S)),1),s("div",null,"⏰: "+b(y.value),1)])]),s("div",ve,[ee(ae,{appear:"",name:"list",tag:"ul",class:"board",style:te(`grid-template-columns: repeat(${h[r(u)].column}, 1fr)`)},{default:le(()=>[(c(!0),v(j,null,z(o.value,t=>(c(),v(j,null,[(c(!0),v(j,null,z(t,e=>(c(),v("li",{key:`key + ${e.idx}`,class:V([`item n${e.countMine}`,L(e.row,e.col)]),onMouseenter:n=>H(e.row,e.col),onClick:n=>[e.isChecked?"":R(e.row,e.col)],onMousedown:D,onMouseup:w(n=>I(e.row,e.col),["right"])},[r(g)?(c(),v("span",fe,b(e.countMine>0&&e.isChecked?e.countMine:""),1)):A("",!0)],42,de))),128))],64))),256))]),_:1},8,["style"])]),r(g)&&!r(f)?(c(),v("div",he,[s("a",{href:"#",onClick:w(O,["prevent"])},"게임 그만하기",8,ge)])):A("",!0),r(M)||r(f)?(c(),v("div",_e,[r(M)?(c(),v("div",me,[N(" 🎉 WIN! 🎉"),pe,s("span",null,"⏰: "+b(y.value),1),s("div",ke,[s("a",{href:"#",onClick:w(T,["prevent"])},"게임 다시하기",8,Ce)])])):A("",!0),r(f)?(c(),v("span",Me,[N(" 🔥 Game Over 🔥 "),s("span",ye,[s("a",{href:"#",onClick:w(T,["prevent"])},"게임 다시하기",8,we)])])):A("",!0)])):A("",!0)],2)],32))}});export{be as default};
